
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>API Â· Neutrino</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-npmsearchlist/styles.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../webpack-chain.html" />
    
    
    <link rel="prev" href="../cli/" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../installation.html">
            
                <a href="../installation.html">
            
                    
                    Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../usage.html">
            
                <a href="../usage.html">
            
                    
                    Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../project-layout.html">
            
                <a href="../project-layout.html">
            
                    
                    Project Layout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../FAQ.html">
            
                <a href="../FAQ.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../learning-resources.html">
            
                <a href="../learning-resources.html">
            
                    
                    Learning Resources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../cli/">
            
                <a href="../cli/">
            
                    
                    CLI
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.8" data-path="./">
            
                <a href="./">
            
                    
                    API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../webpack-chain.html">
            
                <a href="../webpack-chain.html">
            
                    
                    Configuration API - webpack-chain
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../customization/">
            
                <a href="../customization/">
            
                    
                    Customization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../creating-presets.html">
            
                <a href="../creating-presets.html">
            
                    
                    Creating presets
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../upgrading-neutrino.html">
            
                <a href="../upgrading-neutrino.html">
            
                    
                    Upgrading from v6 to v7
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../presets/">
            
                <a href="../presets/">
            
                    
                    Presets
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="../presets/neutrino-preset-web/">
            
                <a href="../presets/neutrino-preset-web/">
            
                    
                    Web
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="../presets/neutrino-preset-react/">
            
                <a href="../presets/neutrino-preset-react/">
            
                    
                    React
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="../presets/neutrino-preset-node/">
            
                <a href="../presets/neutrino-preset-node/">
            
                    
                    Node.js
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4" data-path="../presets/neutrino-preset-airbnb-base/">
            
                <a href="../presets/neutrino-preset-airbnb-base/">
            
                    
                    Airbnb
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.5" data-path="../presets/neutrino-preset-karma/">
            
                <a href="../presets/neutrino-preset-karma/">
            
                    
                    Karma
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.6" data-path="../presets/neutrino-preset-mocha/">
            
                <a href="../presets/neutrino-preset-mocha/">
            
                    
                    Mocha
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.7" data-path="../presets/neutrino-preset-jest/">
            
                <a href="../presets/neutrino-preset-jest/">
            
                    
                    Jest
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.8" data-path="../presets/community-presets.html">
            
                <a href="../presets/community-presets.html">
            
                    
                    Community presets
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../middleware/">
            
                <a href="../middleware/">
            
                    
                    Middleware
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="../middleware/neutrino-middleware-banner/">
            
                <a href="../middleware/neutrino-middleware-banner/">
            
                    
                    banner
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="../middleware/neutrino-middleware-chunk/">
            
                <a href="../middleware/neutrino-middleware-chunk/">
            
                    
                    chunk
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3" data-path="../middleware/neutrino-middleware-clean/">
            
                <a href="../middleware/neutrino-middleware-clean/">
            
                    
                    clean
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.4" data-path="../middleware/neutrino-middleware-compile-loader/">
            
                <a href="../middleware/neutrino-middleware-compile-loader/">
            
                    
                    compile-loader
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.5" data-path="../middleware/neutrino-middleware-copy/">
            
                <a href="../middleware/neutrino-middleware-copy/">
            
                    
                    copy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.6" data-path="../middleware/neutrino-middleware-env/">
            
                <a href="../middleware/neutrino-middleware-env/">
            
                    
                    env
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.7" data-path="../middleware/neutrino-middleware-eslint/">
            
                <a href="../middleware/neutrino-middleware-eslint/">
            
                    
                    eslint
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.8" data-path="../middleware/neutrino-middleware-font-loader/">
            
                <a href="../middleware/neutrino-middleware-font-loader/">
            
                    
                    font-loader
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.9" data-path="../middleware/neutrino-middleware-hot/">
            
                <a href="../middleware/neutrino-middleware-hot/">
            
                    
                    hot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.10" data-path="../middleware/neutrino-middleware-html-loader/">
            
                <a href="../middleware/neutrino-middleware-html-loader/">
            
                    
                    html-loader
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.11" data-path="../middleware/neutrino-middleware-html-template/">
            
                <a href="../middleware/neutrino-middleware-html-template/">
            
                    
                    html-template
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.12" data-path="../middleware/neutrino-middleware-image-loader/">
            
                <a href="../middleware/neutrino-middleware-image-loader/">
            
                    
                    image-loader
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.13" data-path="../middleware/neutrino-middleware-loader-merge/">
            
                <a href="../middleware/neutrino-middleware-loader-merge/">
            
                    
                    loader-merge
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.14" data-path="../middleware/neutrino-middleware-minify/">
            
                <a href="../middleware/neutrino-middleware-minify/">
            
                    
                    minify
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.15" data-path="../middleware/neutrino-middleware-pwa/">
            
                <a href="../middleware/neutrino-middleware-pwa/">
            
                    
                    pwa
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.16" data-path="../middleware/neutrino-middleware-start-server/">
            
                <a href="../middleware/neutrino-middleware-start-server/">
            
                    
                    start-server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.17" data-path="../middleware/neutrino-middleware-style-loader/">
            
                <a href="../middleware/neutrino-middleware-style-loader/">
            
                    
                    style-loader
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.18" data-path="../middleware/community-middleware.html">
            
                <a href="../middleware/community-middleware.html">
            
                    
                    Community middleware
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" >
            
                <a target="_blank" href="https://github.com/mozilla-neutrino/neutrino-dev/tree/docs-v6/docs">
            
                    
                    v6 Documentation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16" >
            
                <a target="_blank" href="https://github.com/mozilla-neutrino/neutrino-dev/tree/docs-v5/docs">
            
                    
                    v5 Documentation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17" >
            
                <a target="_blank" href="https://github.com/mozilla-neutrino/neutrino-dev/tree/docs-v4/docs">
            
                    
                    v4 Documentation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="../contributing/">
            
                <a href="../contributing/">
            
                    
                    Contributing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.1" data-path="../contributing/development.html">
            
                <a href="../contributing/development.html">
            
                    
                    Development Process
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.2" data-path="../contributing/code-of-conduct.html">
            
                <a href="../contributing/code-of-conduct.html">
            
                    
                    Code of Conduct
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >API</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="neutrino-api">Neutrino API</h1>
<p>When using Neutrino via the <a href="../cli/">CLI</a>, it creates an instance of the Neutrino API which picks up
any middleware and arguments passed on the command line or located in your <code>.neutrinorc.js</code>. If you desire, you can
also create your own instance of the Neutrino API and interact with it programmatically.</p>
<h2 id="importing">Importing</h2>
<p>The default export of the Neutrino module is an object with the core Neutrino API, along with available
built-in functions for the API to run:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span>
  Neutrino<span class="token punctuation">,</span>
  build<span class="token punctuation">,</span>
  inspect<span class="token punctuation">,</span>
  start<span class="token punctuation">,</span>
  test
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>The <code>Neutrino</code> function is the lowest-level API, and each of the other methods can be used with the Neutrino
API for executing their functionality. First, we will cover the <code>Neutrino</code> API and
later showing how to use the runnable functions.</p>
<h2 id="instantiation">Instantiation</h2>
<p>In order to access the Neutrino API, you must require or import it and invoke it, passing in any
options:</p>
<p>Using <code>require</code>:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Neutrino <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Using ES imports:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> Neutrino <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="api-options">API options</h2>
<p>The Neutrino function can accept an object for setting a number of useful options.</p>
<h3 id="path-options">Path options</h3>
<p>The path options mentioned afterwards are generated using JavaScript object getters and setters, meaning their
assignment and access will produce a computed value each time. For example, the value set for <code>options.source</code> may not
be the same as the value retrieved, as they will be path-normalized to absolute paths:</p>
<pre class="language-"><code class="lang-js">api<span class="token punctuation">.</span>options<span class="token punctuation">.</span>source <span class="token operator">=</span> <span class="token string">&apos;lib&apos;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>options<span class="token punctuation">.</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//   /project/lib</span>
</code></pre>
<pre class="language-"><code class="lang-js">api<span class="token punctuation">.</span>options<span class="token punctuation">.</span>entry <span class="token operator">=</span> <span class="token string">&apos;app.js&apos;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>options<span class="token punctuation">.</span>entry<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//   /project/src/app.js</span>
api<span class="token punctuation">.</span>options<span class="token punctuation">.</span>source <span class="token operator">=</span> <span class="token string">&apos;lib&apos;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>options<span class="token punctuation">.</span>entry<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//   /project/lib/app.js</span>
</code></pre>
<h3 id="optionsroot"><code>options.root</code></h3>
<p>Set the base directory which Neutrino middleware and presets operate on. Typically this is the project directory where
the package.json would be located. If the option is not set, Neutrino defaults it to <code>process.cwd()</code>. If a relative
path is specified, it will be resolved relative to <code>process.cwd()</code>; absolute paths will be used as-is.</p>
<pre class="language-"><code class="lang-js"><span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// if not specified, defaults to process.cwd()</span>

  <span class="token comment" spellcheck="true">// relative, resolves to process.cwd() + website</span>
  root<span class="token punctuation">:</span> <span class="token string">&apos;website&apos;</span><span class="token punctuation">,</span>

  <span class="token comment" spellcheck="true">// absolute</span>
  root<span class="token punctuation">:</span> <span class="token string">&apos;/code/website&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="optionssource"><code>options.source</code></h3>
<p>Set the directory which contains the application source code. If the option is not set, Neutrino defaults it to <code>src</code>.
If a relative path is specified, it will be resolved relative to <code>options.root</code>; absolute paths will be used as-is.</p>
<pre class="language-"><code class="lang-js"><span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// if not specified, defaults to options.root + src</span>

  <span class="token comment" spellcheck="true">// relative, resolves to options.root + lib</span>
  source<span class="token punctuation">:</span> <span class="token string">&apos;lib&apos;</span><span class="token punctuation">,</span>

  <span class="token comment" spellcheck="true">// absolute</span>
  source<span class="token punctuation">:</span> <span class="token string">&apos;/code/website/lib&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="optionsoutput"><code>options.output</code></h3>
<p>Set the directory which will be the output of built assets. If the option is not set, Neutrino defaults it to <code>build</code>.
If a relative path is specified, it will be resolved relative to <code>options.root</code>; absolute paths will be used as-is.</p>
<pre class="language-"><code class="lang-js"><span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// if not specified, defaults to options.root + build</span>

  <span class="token comment" spellcheck="true">// relative, resolves to options.root + dist</span>
  output<span class="token punctuation">:</span> <span class="token string">&apos;dist&apos;</span><span class="token punctuation">,</span>

  <span class="token comment" spellcheck="true">// absolute</span>
  output<span class="token punctuation">:</span> <span class="token string">&apos;/code/website/dist&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="optionstests"><code>options.tests</code></h3>
<p>Set the directory that contains test files. If the option is not set, Neutrino defaults it to <code>test</code>.
If a relative path is specified, it will be resolved relative to <code>options.root</code>; absolute paths will be used as-is.</p>
<pre class="language-"><code class="lang-js"><span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// if not specified, defaults to options.root + test</span>

  <span class="token comment" spellcheck="true">// relative, resolves to options.root + testing</span>
  tests<span class="token punctuation">:</span> <span class="token string">&apos;testing&apos;</span><span class="token punctuation">,</span>

  <span class="token comment" spellcheck="true">// absolute</span>
  tests<span class="token punctuation">:</span> <span class="token string">&apos;/code/website/testing&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="optionsentry"><code>options.entry</code></h3>
<p>Set the main entry point for the application. If the option is not set, Neutrino defaults it to <code>index.*</code> - the
extension is resolved by Webpack. The main file by default is not required to be in JavaScript format. If a relative
path is specified, it will be resolved relative to <code>options.source</code>; absolute paths will be used as-is.</p>
<pre class="language-"><code class="lang-js"><span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// if not specified, defaults to options.source + index</span>

  <span class="token comment" spellcheck="true">// relative, resolves to options.source + entry.js</span>
  entry<span class="token punctuation">:</span> <span class="token string">&apos;entry.js&apos;</span><span class="token punctuation">,</span>

  <span class="token comment" spellcheck="true">// absolute</span>
  entry<span class="token punctuation">:</span> <span class="token string">&apos;/code/website/src/entry.js&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="optionsnodemodules"><code>options.node_modules</code></h3>
<p>Set the directory which contains the Node.js modules of the project. If the option is not set, Neutrino defaults it to
<code>node_modules</code>. If a relative path is specified, it will be resolved relative to <code>options.root</code>; absolute paths will be
used as-is.</p>
<pre class="language-"><code class="lang-js"><span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// if not specified, defaults to options.root + node_modules</span>

  <span class="token comment" spellcheck="true">// relative, resolves to options.root + modules</span>
  node_modules<span class="token punctuation">:</span> <span class="token string">&apos;modules&apos;</span><span class="token punctuation">,</span>

  <span class="token comment" spellcheck="true">// absolute</span>
  node_modules<span class="token punctuation">:</span> <span class="token string">&apos;/code/website/modules&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h2 id="other-options">Other options</h2>
<h3 id="optionsdebug"><code>options.debug</code></h3>
<p>Informs interested middleware that they should be in a state of debugging. This does not currently make Neutrino itself
behave any differently, rather it can be used to inform middleware to behave differently, by outputting console
information, inspecting processes, or changing configuration which is helpful for debugging.</p>
<h3 id="optionsenv"><code>options.env</code></h3>
<p>When using the CLI and the higher-level API functions, environment variables are automatically set based on the command
you are using. When using the <code>Neutrino</code> low-level API this is not the case, and you should specify an <code>env</code> option
to the API prior to calling any build commands or loading any middleware if you expect them to build correctly based on
their environment target.</p>
<p>Use <code>options.env</code> to set environment variables and make them available to middleware for conditional operations.</p>
<pre class="language-"><code class="lang-js"><span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  env<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    NODE_ENV<span class="token punctuation">:</span> <span class="token string">&apos;production&apos;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>NODE_ENV <span class="token comment" spellcheck="true">// &quot;production&quot;</span>
</code></pre>
<h3 id="optionscommand"><code>options.command</code></h3>
<p>The currently running CLI command, e.g. <code>build</code>, <code>start</code>, <code>lint</code>, etc. This value is typically
set by the CLI when instantiating the API, but can also be set manually. This value is used by some
middleware to determine when to augment the configuration with certain functionality.</p>
<h2 id="neutrino-api">Neutrino API</h2>
<p>When creating a Neutrino instance, you have the option of providing an object which can be passed as options to
middleware as <code>neutrino.options</code>.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Neutrino <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> neutrino <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// or with optional options</span>
<span class="token keyword">const</span> neutrino <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">{</span> output<span class="token punctuation">:</span> <span class="token string">&apos;dist&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="options"><code>options</code></h3>
<p>An object containing various properties for the benefit of the API and middleware. This can contain
options set by both Neutrino and any included middleware.</p>
<h3 id="config"><code>config</code></h3>
<p>When constructing a Neutrino instance, a property of <code>config</code> is set to be a new instance of
<a href="https://github.com/mozilla-neutrino/webpack-chain" target="_blank">webpack-chain</a>. This property is then available to all middleware
which subsequently augment it with their specific configuration. All middleware and presets added use this single
<code>config</code> to store their data, meaning that middleware load order has an effect on which config values take precedence.
Middleware loaded first will have any configuration overridden by later middleware with matching properties.</p>
<h3 id="usemiddlewareformat"><code>use(middlewareFormat)</code></h3>
<p>Use a Neutrino middleware format, optionally providing options which will be passed to the middleware.
Middleware functions will be invoked with two arguments:</p>
<ol>
<li>The Neutrino API instance</li>
<li>Any middleware options argument passed to <code>use</code>.</li>
</ol>
<h4 id="manually-loading-middleware-with-use">Manually loading middleware with <code>use</code></h4>
<p>Using the Neutrino API you can load <a href="../middleware/">middleware</a> and presets (which are also just middleware)
using the <code>use</code> method. The <code>use</code> method takes in a middleware format and optionally any options that should be
passed to the middleware. See <a href="../middleware/#formats">middleware formats</a> for details on the different ways to
specify middleware.</p>
<pre class="language-"><code class="lang-js"><span class="token comment" spellcheck="true">/**
* use::
*   (Function, Object)
*   (String, Object)
*   (Array [Middleware, Object])
*   (Object)
*/</span>
<span class="token comment" spellcheck="true">// use :: (Function, Object)</span>
neutrino<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>neutrino <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">/* options */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// use :: (String, Object)</span>
neutrino<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&apos;middleware&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">/* options */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// use :: (Array [Middleware, Object])</span>
neutrino<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&apos;middleware&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">/* options */</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// use :: (Object)</span>
neutrino<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment" spellcheck="true">// ...even more middleware</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>Any <code>options</code> passed to a middleware <em>object format</em> will be set on the Neutrino API instance prior to consuming any
middleware in the <code>use</code> array.</p>
<h2 id="events">Events</h2>
<h3 id="oneventname-handler"><code>on(eventName, handler)</code></h3>
<p>Add a <code>handler</code> function to a Neutrino instance that listens to events named <code>eventName</code>. If the event handler
is going to be used with <code>emitForAll</code>, ensure the <code>handler</code> returns a Promise. Use the <code>*</code> event name to
execute the handler for all events. Note that <code>*</code> events are triggered after named events.</p>
<pre class="language-"><code class="lang-js">api<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&apos;custom-event&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="offeventname-handler"><code>off(eventName, handler)</code></h3>
<p>Remove a <code>handler</code> function from listening to a particular <code>eventName</code>, including <code>*</code> events.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token comment" spellcheck="true">/* ... */</span><span class="token punctuation">;</span>

api<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&apos;custom-event&apos;</span><span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>

api<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">&apos;custom-event&apos;</span><span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="emiteventname-payload"><code>emit(eventName, payload)</code></h3>
<p>Invoke all handlers for the given <code>eventName</code>. Note that <code>*</code> handlers are executed after named events. You may
also pass an optional <code>payload</code> value to be passed as an argument to the associated event handler function.</p>
<pre class="language-"><code class="lang-js">api<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&apos;custom-event&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">/* payload */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="emitforalleventname-payload"><code>emitForAll(eventName, payload)</code></h3>
<p>Invoke all handlers for the given <code>eventName</code>, meant for usage with Promise-dependent events. For example, calling
<code>emitForAll(&apos;build&apos;)</code> will trigger an event named build, and each event handler can return a Promise denoting when it
is finished. When all events have finished, this call will resolve.</p>
<p>This method returns a Promise which resolves when all event handlers have also resolved.</p>
<pre class="language-"><code class="lang-js">api
  <span class="token punctuation">.</span><span class="token function">emitForAll</span><span class="token punctuation">(</span><span class="token string">&apos;custom-event&apos;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;All custom-events have resolved!&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>By passing an additional argument for <code>payload</code>, you can pass custom data to all the event handlers</p>
<pre class="language-"><code class="lang-js">api<span class="token punctuation">.</span><span class="token function">emitForAll</span><span class="token punctuation">(</span><span class="token string">&apos;custom-event&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> custom<span class="token punctuation">:</span> <span class="token string">&apos;payload&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// ...</span>

api<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&apos;custom-event&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>args<span class="token punctuation">,</span> payload<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>payload<span class="token punctuation">.</span>custom<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// &quot;payload&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="configtoconfig"><code>config.toConfig()</code></h3>
<p>While tools like webpack-chain provide a convenient API for creating Webpack configurations, this is not a format that
is understandable by Webpack. With <code>config.toConfig()</code>, the webpack-chain instance at <code>config</code> will be converted to
a configuration object readable directly by Webpack.</p>
<pre class="language-"><code class="lang-js">api<span class="token punctuation">.</span>config<span class="token punctuation">.</span><span class="token function">toConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// -&gt; { ... }</span>
</code></pre>
<h3 id="registercommand-handler"><code>register(command, handler)</code></h3>
<p>This method registers a new command which can be run from the API at a later time. This function takes two
arguments: a String command name, and a Function which accepts a Webpack configuration and the API. The return value of
<code>handler</code> depends on the expected usage of the command.</p>
<p>The handler function can accept two arguments:</p>
<ol>
<li>A Webpack configuration object. This is the result of calling <code>api.config.toConfig()</code>, and represents a
Webpack-usable object</li>
<li>The Neutrino API instance</li>
</ol>
<p>_Example: add a new runnable command which resolves with a JSON-formatted Webpack configuration:`</p>
<pre class="language-"><code class="lang-js">api<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&apos;jsonify&apos;</span><span class="token punctuation">,</span> config <span class="token operator">=</span><span class="token operator">&gt;</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>The registered command can be triggered from <code>call()</code>, <code>run()</code>, or via the CLI.</p>
<h3 id="requiremoduleid"><code>require(moduleId)</code></h3>
<p>This method is typically used internally by the Neutrino API to attempt to require a string module ID in various paths
before failing. Takes a String <code>moduleId</code> and returns the first exports of the module it is able to require. This
will throw an exception if Neutrino is unable to require the specified module ID in any of its know paths.</p>
<h3 id="callcommandname-middleware"><code>call(commandName, middleware)</code></h3>
<p>This API method will invoke a command function that has been previously defined by the <code>register</code> method after
consuming any specified middleware. The <code>commandName</code> argument should be a String, and optionally <code>middleware</code>
should be an Array of middleware formats. If <code>middleware</code> is not specified, Neutrino will load middleware from the
local <code>.neutrinorc.js</code> file.</p>
<p>The <code>call</code> method will invoke the registered command with two arguments: a Webpack configuration object, and the
instance of the Neutrino API. The return value of using <code>call</code> will be the return value of invoking the registered
handler with these two arguments.</p>
<p>For a concrete example, the <a href="../middleware/neutrino-middleware-eslint">eslint middleware</a> registers an <code>eslintrc</code>
command. The results of this command can be returned with <code>call</code> (provided this middleware is loaded within
<code>.neutrinorc.js</code> in this example):</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Neutrino <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> eslintConfig <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&apos;eslintrc&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="runcommandname-middleware"><code>run(commandName, middleware)</code></h3>
<p>This API method will invoke a command function that has been previously defined by the <code>register</code> method after
consuming any specified middleware. The <code>commandName</code> argument should be a String, and optionally <code>middleware</code>
should be an Array of middleware formats. If <code>middleware</code> is not specified, Neutrino will load middleware from the
local <code>.neutrinorc.js</code> file.</p>
<p>The Neutrino package exports functions to automate key parts of interacting with the Neutrino API, and they are named
<code>build</code>, <code>inspect</code>, <code>start</code>, and <code>test</code>. These are functions that are invoked when using the CLI.</p>
<p>Every runnable command performs the following flow:</p>
<ul>
<li>Requires and <code>use</code>s provided middleware, or pulls from <code>.neutrinorc.js</code> if not specified</li>
<li>Triggers all <code>pre*</code> event handlers for the given command name</li>
<li>Triggers all <code>prerun</code> event handlers</li>
<li>Invokes the given registered command name</li>
<li>Triggers all event handlers for the given command name</li>
<li>Triggers all <code>run</code> event handlers</li>
</ul>
<p>The <code>run</code> method will invoke the registered command with two arguments: a Webpack configuration object, and the
instance of the Neutrino API. Calling a runnable command will return a
<a href="https://github.com/fluture-js/Fluture" target="_blank"><code>Future</code></a> which can then be used to kick off the above flow. This Future will
be resolved with the resolution value of the command, or rejected with any errors the command provides. The return
value from the registered command can be any synchronous value, Promise, or Future, and Neutrino will properly chain
from this.</p>
<p>_Example: execute the <code>jsonify</code> command we registered in the <code>register()</code> example`:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Future <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;fluture&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

api<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&apos;jsonify&apos;</span><span class="token punctuation">,</span> config <span class="token operator">=</span><span class="token operator">&gt;</span> Future<span class="token punctuation">.</span><span class="token keyword">of</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// ...</span>

api
  <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">&apos;jsonify&apos;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>error<span class="token punctuation">,</span> json <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>The <code>run</code> method takes two arguments:</p>
<ul>
<li>A String command name which the API can execute, which has been previously registered</li>
<li>An optional Array which will be iterated and used as middleware. Not providing this will cause Neutrino to attempt
to load middleware from the local <code>.neutrinorc.js</code> file.</li>
</ul>
<p>Prior to starting this process, Neutrino will trigger and wait for <code>pre{command}</code> and <code>prerun</code> events to
finish. After it is complete, Neutrino will trigger and wait for <code>{command}</code> and <code>run</code> events to finish.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Neutrino<span class="token punctuation">,</span> build <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

api<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&apos;build&apos;</span><span class="token punctuation">,</span> build<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">run</span><span class="token punctuation">(</span><span class="token string">&apos;build&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&apos;neutrino-preset-react&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span>
    errors <span class="token operator">=</span><span class="token operator">&gt;</span> errors<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">,</span>
    stats <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">{</span> colors<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="runnable-functions">Runnable Functions</h2>
<p>The following functions are exported from Neutrino and can be registered with the API to be executed from <code>run</code>
(recommended) or <code>call</code>. These functions are used internally by the CLI, which creates its own instance of the API and
registers them prior to <code>run</code>. Since each of them can be registered directly with the API, they each have the same
signature accepting a Webpack configuration and an API instance.</p>
<h3 id="startwebpackconfig-neutrinoapi"><code>start(webpackConfig, neutrinoApi)</code></h3>
<p>The <code>start</code> function is responsible for creating a development bundle, and when possible, starting a development
server or source watcher. If the Neutrino config contains options for <code>devServer</code>, then a webpack-dev-server will be
started, otherwise a Webpack source watcher will be started.</p>
<p>The <code>start</code> function returns a <a href="https://github.com/fluture-js/Fluture" target="_blank"><code>Future</code></a> which can then be used to
kick off the runnable flow. This Future will be resolved with a Webpack compiler (for example, if you wish to listen for
additional build events), or reject with an <strong>array of errors</strong>. This resolution will be completed when the dev server
or Webpack watcher has been started.</p>
<p>Using the <code>run</code> method:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Neutrino<span class="token punctuation">,</span> start <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

api<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&apos;start&apos;</span><span class="token punctuation">,</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span>

api<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">&apos;start&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&apos;neutrino-preset-react&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span>
    errors <span class="token operator">=</span><span class="token operator">&gt;</span> errors<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>err <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    compiler <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;App running!&apos;</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Calling <code>start</code> manually:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Neutrino<span class="token punctuation">,</span> start <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

api<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino-preset-react&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">start</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>config<span class="token punctuation">.</span><span class="token function">toConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> api<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span>
    errors <span class="token operator">=</span><span class="token operator">&gt;</span> errors<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>err <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    compiler <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;App running!&apos;</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="buildwebpackconfig-neutrinoapi"><code>build(webpackConfig, neutrinoApi)</code></h3>
<p>The <code>build</code> function is responsible for creating a bundle typically used for production.</p>
<p>The <code>build</code> function returns a <a href="https://github.com/fluture-js/Fluture" target="_blank"><code>Future</code></a> which can then be used to
kick off the runnable flow. This Future will be resolved with a Webpack stats object about the build, or reject with an
<strong>array of errors</strong>. This resolution will be completed when the build has been completed.</p>
<p>Using the <code>run</code> method:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Neutrino<span class="token punctuation">,</span> build <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

api<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&apos;build&apos;</span><span class="token punctuation">,</span> build<span class="token punctuation">)</span><span class="token punctuation">;</span>

api<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">&apos;build&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&apos;neutrino-preset-node&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span>
    errors <span class="token operator">=</span><span class="token operator">&gt;</span> errors<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>err <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    stats <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">{</span> colors<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Calling <code>build</code> manually:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Neutrino<span class="token punctuation">,</span> build <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

api<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino-preset-node&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>config<span class="token punctuation">.</span><span class="token function">toConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> api<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span>
    errors <span class="token operator">=</span><span class="token operator">&gt;</span> errors<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>err <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    stats <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">{</span> colors<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="testwebpackconfig-neutrinoapi"><code>test(webpackConfig, neutrinoApi)</code></h3>
<p>The <code>test</code> function is typically used for gathering middleware and options needed for testing and triggering relevant
events as a signal to test middleware that they may run. Using the <code>test</code> method has no other functionality other than
performing the automated runnable flow outlined above. Since <code>test()</code> does nothing other than triggering this flow,
without middleware listening for <code>test</code> events, nothing will happen. For this reason, it is recommended that <code>test</code> be
used with the <code>run</code> method to ensure that all test-related events are properly retriggered. After Neutrino triggers and
waits for <code>test</code> events to finish, the test runners will do their work and <code>test()</code> can resolve.</p>
<p>Any <code>args</code> passed to the API as options are passed on to the event handlers and typically have properties for an array
of <code>files</code> to test, as well as a property for <code>watch</code>ing and rerunning tests.</p>
<p>The <code>test</code> function returns a <a href="https://github.com/fluture-js/Fluture" target="_blank"><code>Future</code></a> which can then be used to
kick off the runnable flow. This Future will be resolved, or reject with an error. This resolution will be completed
when the testing has been finished.</p>
<p>Using the <code>run</code> method:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Neutrino<span class="token punctuation">,</span> test <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

api<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&apos;test&apos;</span><span class="token punctuation">,</span> test<span class="token punctuation">)</span><span class="token punctuation">;</span>

api<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">&apos;test&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&apos;neutrino-preset-node&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;neutrino-preset-mocha&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span>
    err <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;Testing completed!&apos;</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// With API args</span>
<span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  args<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    files<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token comment" spellcheck="true">/* ... */</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    watch<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

api<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&apos;test&apos;</span><span class="token punctuation">,</span> test<span class="token punctuation">)</span><span class="token punctuation">;</span>

api<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">&apos;test&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&apos;neutrino-preset-node&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;neutrino-preset-mocha&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span>
    errors <span class="token operator">=</span><span class="token operator">&gt;</span> errors<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>err <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;Testing completed!&apos;</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Calling <code>test</code> manually:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Neutrino<span class="token punctuation">,</span> test <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

api<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino-preset-node&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
api<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino-preset-mocha&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>config<span class="token punctuation">.</span><span class="token function">toConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> api<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span>
    err <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;Testing completed!&apos;</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="inspectwebpackconfig-neutrinoapi"><code>inspect(webpackConfig, neutrinoApi)</code></h3>
<p>The <code>inspect()</code> function is responsible for creating an object string which represents a Webpack configuration for the
provided middleware and options. Upon execution <code>inspect</code> will:</p>
<ul>
<li>Receive the Webpack configuration object</li>
<li>Deep-sort the object</li>
<li>Stringify the object with 2 spaces (<strong>not</strong> JSON stringified!)</li>
</ul>
<p>The <code>inspect</code> function returns a <a href="https://github.com/fluture-js/Fluture" target="_blank"><code>Future</code></a> which can then be used to
kick off the runnable flow. This Future will be resolved with a string representation of the Webpack config, or reject
with an error.</p>
<p>Using the <code>run</code> method:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Neutrino<span class="token punctuation">,</span> inspect <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

api<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&apos;inspect&apos;</span><span class="token punctuation">,</span> inspect<span class="token punctuation">)</span><span class="token punctuation">;</span>

api<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">&apos;inspect&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&apos;neutrino-preset-node&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span>
    errors <span class="token operator">=</span><span class="token operator">&gt;</span> errors<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>err <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    config <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Calling <code>inspect</code> manually:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Neutrino<span class="token punctuation">,</span> inspect <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token function">Neutrino</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

api<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&apos;neutrino-preset-node&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">inspect</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>config<span class="token punctuation">.</span><span class="token function">toConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> api<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span>
    err <span class="token operator">=</span><span class="token operator">&gt;</span> err <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">,</span>
    config <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../cli/" class="navigation navigation-prev " aria-label="Previous page: CLI">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../webpack-chain.html" class="navigation navigation-next " aria-label="Next page: Configuration API - webpack-chain">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"API","level":"1.8","depth":1,"next":{"title":"Configuration API - webpack-chain","level":"1.9","depth":1,"path":"webpack-chain.md","ref":"./webpack-chain.md","articles":[]},"previous":{"title":"CLI","level":"1.7","depth":1,"path":"cli/README.md","ref":"./cli/README.md","articles":[]},"dir":"ltr"},"config":{"plugins":["edit-link","prism","-highlight","github","anchorjs","npmsearchlist"],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{},"github":{"url":"https://github.com/mozilla-neutrino/neutrino-dev/"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"npmsearchlist":{},"fontsettings":{"theme":"white","family":"sans","size":2},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit page","base":"https://github.com/mozilla-neutrino/neutrino-dev/tree/master/docs"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchorjs":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Neutrino","gitbook":"*"},"file":{"path":"api/README.md","mtime":"2017-09-28T16:04:55.942Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-10-06T18:29:53.412Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.1/anchor.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-npmsearchlist/script.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

